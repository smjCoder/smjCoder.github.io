---
layout: article
title: Unity3D打包iOS工程（二）
key: 20180804
tags:
- 中文
- SDK集成
toc: true
date: 2018-08-04 10:22:00
---
> 更换了正式版的SDK，因为需求是第三方登录应用，所以要添加外部程序的启动功能

<!--more-->

想要你的APP启动另外的APP，就需要在下图中添加相关APP的信息

![](/images/iOS/URLType.png)

但是想要集成到自动编译打包中，肯定不能手动的在图形界面中添加了

上图的本质呢，其实还是Info.plist文件，只是Xcode帮你把plist可视化了而已，所以我们的具体操作还是通过Unity脚本去修改plist文件就可以了

```c#
string plistPath = Path.Combine(pathToBuildProject, "Info.plist");
PlistDocument plist = new PlistDocument();
plist.ReadFromFile(plistPath);
PlistElementDict rootDict = plist.root;

//CFBundleURLTypes
const string urlKey = "CFBundleURLTypes";
PlistElementArray urlAry;
PlistElement urlel;
if (rootDict.values.TryGetValue(urlKey, out urlel))
{
	urlAry = lspel.AsArray();
}
else
{
	urlAry = rootDict.CreateArray(urlKey);
}

PlistElementDict qqdic = urlAry.AddDict();
qqdic.SetString("CFBundleTypeRole", "Editor");
qqdic.SetString("CFBundleURLName", "qq");
PlistElementArray qqary = new PlistElementArray();
qqary.AddString("*************");
qqdic["CFBundleURLSchemes"] = qqary;

PlistElementDict wxdic = urlAry.AddDict();
wxdic.SetString("CFBundleTypeRole", "Editor");
wxdic.SetString("CFBundleURLName", "wx");
PlistElementArray wxary = new PlistElementArray();
wxary.AddString("*************");
wxdic["CFBundleURLSchemes"] = wxary;

PlistElementDict alidic = urlAry.AddDict();
alidic.SetString("CFBundleTypeRole", "Editor");
alidic.SetString("CFBundleURLName", "Ali");
PlistElementArray aliary = new PlistElementArray();
aliary.AddString("*************");
alidic["CFBundleURLSchemes"] = aliary;

// 应用修改
File.WriteAllText(plistPath, plist.WriteToString());
```

上面的代码只是简单的例子，但是完全可以满足少量外部APP开起的需求，如果你需要添加更多的外部APP，请使用for循环添加（笑）