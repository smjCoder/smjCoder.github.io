---
layout: article
title: Git提交的移动、合并、与修改
key: 20180904
tags:
- 中文
- Unity3D
- Git
toc: true
date: 2018-09-04 22:57:00
---
> 在工作中，或多或少的都会遇到赶工的情况，由于工作紧急，对需求的理解不到位等情况，可能在代码上做很多无用功，产生很多无用的提交，或是将工作完成后，把代码一股脑的全部提交了。
>
> 提交变得非常的混乱，这时，我们需要对我们的提交进行整理！

<!--more-->

由于我们在A分支上进行了太多的操作，导致A分支现在混乱不堪，我们无法再A分支上去整理我的提交，所以，我们要在最新的 `master` 分支上新建一个B分支。

1. 使用 `git rebase -i A分支的前一个提交` 将A分支 `rebase` 到B分支上
2. 进入编辑模式，将除了第一行提交外的所有提交前的 `pack` 更改为 `squash` 或 `s` 
3. `:wq` 保存退出，完成 `rebase`

这时，A分支的所有提交都合并成一次提交，并 `rebase` 到了B分支上，一些重复的修改（在一次提交将a改为b，在另一次提交又将b改回成a）已经消失了，这样，一些无用的修改就不在分支里面展现了，接下来，我们需要对剩下的文件进行重新整理提交

1. 现在B上已经有了一次新的提交，`git reset` 这次提交，并保留所有的修改到暂存区，这样B分支上就拥有了A分支的所有改动
2. 根据需要选择文件（一般是根据功能或者修改的模块）依次进行提交操作就可以了，这样B分支上的提交就全部都是有用提交，并且清晰明了了！

这些操作虽然简单，但是操作时一定要仔细，避免把自己辛苦码的代码弄丢哦，一定要备份！